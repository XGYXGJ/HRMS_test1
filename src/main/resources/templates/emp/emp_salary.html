<!-- 工资单表格 -->
<div class="card mb-4">
    <div class="card-header d-flex justify-content-between align-items-center">
        <h4 class="mb-0">我的工资单</h4>

        <!-- 按月份查询表单 -->
        <form class="d-flex align-items-center gap-2" method="get" action="/emp/salary">
            <label class="form-label mb-0">按月份查询:</label>
            <!-- 浏览器会提交形如 2025-12 的字符串 -->
            <input type="month" name="month" class="form-control form-control-sm"
                   style="width: 160px;"
                   th:value="${selectedMonth}">
            <button type="submit" class="btn btn-sm btn-primary">查询</button>
        </form>
    </div>
    <div class="card-body">
        <div class="alert alert-info py-2">
            <span>此处显示当前登录账号对应的工资记录（按月份倒序），仅自己可见。</span>
            <span th:if="${selectedMonth != null and !#strings.isEmpty(selectedMonth)}"
                  class="ms-2">
                当前筛选月份：<strong th:text="${selectedMonth}">2025-12</strong>
            </span>
        </div>
        <table class="table table-striped table-hover">
            <thead>
            <tr>
                <th>工资单号</th>
                <th>工资月份</th>
                <th>基本工资</th>
                <th>绩效奖金</th>
                <th>各保险费用</th>
                <th>实发总额</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="row : ${salaryList}">
                <td th:text="${registerCodeMap[row.registerId]}">PAY2025120101</td>
                <td th:text="${row.payrollMonth}">2025-12-01</td>
                <td th:text="${#numbers.formatDecimal(row.baseSalary, 1, 'COMMA', 2, 'POINT')}">0.00</td>
                <td th:text="${#numbers.formatDecimal(row.kpiBonus, 1, 'COMMA', 2, 'POINT')}">0.00</td>
                <td th:text="${#numbers.formatDecimal(row.insuranceFee, 1, 'COMMA', 2, 'POINT')}"
                    class="text-danger">0.00</td>
                <td th:text="${#numbers.formatDecimal(row.grossMoney, 1, 'COMMA', 2, 'POINT')}"
                    class="fw-bold text-success">0.00</td>
            </tr>

            <!-- 没有数据时的提示行 -->
            <tr th:if="${#lists.isEmpty(salaryList)}">
                <td colspan="6" class="text-center text-muted">暂无工资记录。</td>
            </tr>
            </tbody>
        </table>
    </div>
</div>
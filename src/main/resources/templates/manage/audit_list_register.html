<div class="container-fluid">
    <h4 class="mb-3">工资单审核列表</h4>

    <div th:if="${msg}" class="alert alert-info" th:text="${msg}"></div>

    <div class="table-responsive">
        <table class="table table-bordered table-hover align-middle">
            <thead class="table-light">
            <tr>
                <th>工资单编号</th>
                <th>提交人</th>
                <th>所在机构</th>
                <th>提交时间</th>
                <th>状态</th>
                <th style="width:120px;">操作</th>
            </tr>
            </thead>

            <tbody>
            <tr th:each="reg : ${registers}">
                <td th:text="${reg.registerCode}">REG2025</td>

                <!-- 提交人：从 submitterMap 取用户名 -->
                <td th:text="${submitterMap.get(reg.submitterId)?.username}">张三</td>

                <!-- 所在机构：从 orgNameMap 取机构名 -->
                <td th:text="${orgNameMap.get(reg.l3OrgId)}">研发部三组</td>

                <!-- 提交时间：登记时间 / 提交时间 -->
                <td th:text="${#temporals.format(reg.registerTime, 'yyyy-MM-dd HH:mm')}"></td>

                <td>
                    <span th:if="${reg.auditStatus == 'Pending'}" class="badge bg-warning text-dark">待审核</span>
                    <span th:if="${reg.auditStatus == 'Approved'}" class="badge bg-success">已通过</span>
                    <span th:if="${reg.auditStatus == 'Rejected'}" class="badge bg-danger">已驳回</span>
                </td>
                <td>
                    <button class="btn btn-sm btn-outline-primary"
                            th:onclick="|loadContent('/manage/audit/detail/${reg.registerId}?type=Register')|">
                        查看
                    </button>
                </td>
            </tr>

            <tr th:if="${#lists.isEmpty(registers)}">
                <td colspan="6" class="text-center text-muted">暂无待审核工资单</td>
            </tr>
            </tbody>

        </table>
    </div>
</div>
